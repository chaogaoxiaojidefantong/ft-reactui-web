(this["webpackJsonpmy-app2"]=this["webpackJsonpmy-app2"]||[]).push([[0],{14:function(e,t,n){"use strict";n.r(t);var a=n(15),i=n(8),r=n(1),o=n(2),u=n(4),c=n(3),s=n(5),l=n(0),h=n.n(l),f=(n(54),new function e(){Object(r.a)(this,e),this.cssPrefix="ft-"}),p=function(e){function t(e){var n;return Object(r.a)(this,t),(n=Object(u.a)(this,Object(c.a)(t).call(this,e))).state={styles:{},val1:"",val2:""},n.inputElement=void 0,n.inputElement=h.a.createRef(),t.displayName="oginform",n}return Object(s.a)(t,e),Object(o.a)(t,[{key:"handleChage",value:function(e,t){var n=t.target.value;"val1"==e?this.setState(Object(i.a)({},this.state,{},{val1:n})):(e="val2")&&this.setState(Object(i.a)({},this.state,{},{val2:n}))}},{key:"componentWillReceiveProps",value:function(){}},{key:"componentDidUpdate",value:function(){}},{key:"shouldComponentUpdate",value:function(){return!0}},{key:"componentDidMount",value:function(){var e=this.state.styles;e=Object(i.a)({},e,{},{width:this.props.width,height:this.props.height});var t=Object(i.a)({},this.state,{},{styles:e});this.setState(t),this.inputElement.current.focus()}},{key:"submit",value:function(){var e={email:this.state.val1,pwd:this.state.val2};this.props.submit(e)}},{key:"handleFtChange",value:function(e){this.setState(Object(i.a)({},this.state,{},{val1:e}))}},{key:"render",value:function(){return h.a.createElement("div",{className:f.cssPrefix+"login-form"},h.a.createElement(a.a,{onInputChange:this.handleFtChange.bind(this),value:this.state.val1,inputRef:this.inputElement}),h.a.createElement("input",{type:"password",className:f.cssPrefix+"input",style:this.state.styles,onChange:this.handleChage.bind(this,"val2")}),h.a.createElement("button",{onClick:this.submit.bind(this)},"tijiao"))}}]),t}(l.Component);p.displayName=void 0,p.defaultProps={width:"250px",height:"30px"};var d=p,v=(n(56),h.a.createContext("light")),m=function(e){function t(){return Object(r.a)(this,t),Object(u.a)(this,Object(c.a)(t).apply(this,arguments))}return Object(s.a)(t,e),Object(o.a)(t,[{key:"componentDidUpdate",value:function(){}},{key:"componentWillMount",value:function(){}},{key:"render",value:function(){this.context;return h.a.createElement(l.Fragment,null,h.a.createElement("button",null,this.props.children))}}]),t}(l.Component);m.contextType=v;var b=m,y=new(function(){function e(){Object(r.a)(this,e)}return Object(o.a)(e,[{key:"removeSpace",value:function(e){return e.replace(/\s+/g,"")}},{key:"mobileReg",value:function(e){return/^1([38][0-9]|4[579]|5[0-3,5-9]|6[6]|7[0135678]|9[89])\d{8}$/.test(e)}},{key:"indexofRes",value:function(e,t){return-1!=e.indexOf(t)}},{key:"randomMdDe",value:function(e){var t=e.length;return e.substring(0,t-6)}},{key:"randomMd",value:function(e){return e+this.randomWord(!1,6,12)}},{key:"getHtmlBody",value:function(e){var t=e.search("<body>"),n=e.search("</body>")+7,a=e.substring(t,n);return a=a.replace(/[\n]/g,"")}},{key:"randomWord",value:function(e,t,n){var a="",i=t,r=["0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"];e&&(i=Math.round(Math.random()*(n-t))+t);for(var o=0;o<i;o++){a+=r[Math.round(Math.random()*(r.length-1))]}return a}}]),e}()),g=function(){function e(){Object(r.a)(this,e)}return Object(o.a)(e,[{key:"verifyObj",value:function(e){var t=!1;return Object.keys(e).forEach((function(n){e[n].replace(/\s+/g,"")||(t=!0)})),t}},{key:"deleteNull",value:function(e){var t={};return Object.keys(e).forEach((function(n){var a=e[n];null!=a&&void 0!=a&&y.removeSpace(a+"")&&(t[n]=a)})),t}},{key:"clearObj",value:function(e){var t={};return Object.keys(e).forEach((function(e){t[e]=""})),t}}]),e}(),j=new(function(){function e(){Object(r.a)(this,e)}return Object(o.a)(e,[{key:"oneOf",value:function(e,t){for(var n=0;n<t.length;n++)if(e===t[n])return!0;return!1}},{key:"getQueryString",value:function(e){return decodeURIComponent((new RegExp("[?|&]"+e+"=([^&;]+?)(&|#|;|$)").exec(location.href)||[,""])[1].replace(/\+/g,"%20"))||null}}]),e}()),O=n(44),k=function(e){return function(t){function n(){return Object(r.a)(this,n),Object(u.a)(this,Object(c.a)(n).apply(this,arguments))}return Object(s.a)(n,t),Object(o.a)(n,[{key:"componentWillReceiveProps",value:function(e){}},{key:"componentDidMount",value:function(){}},{key:"render",value:function(){var t=this.props;t.name,Object(O.a)(t,["name"]);return h.a.createElement(e,this.props)}}]),n}(l.Component)};n.d(t,"stringUtil",(function(){return y})),n.d(t,"ObjUtil",(function(){return g})),n.d(t,"FtInput",(function(){return a.a})),n.d(t,"FtLoginForm",(function(){return d})),n.d(t,"commonUtil",(function(){return j})),n.d(t,"FtButton",(function(){return b})),n.d(t,"HighOrder",(function(){return k}))},15:function(e,t,n){"use strict";var a=n(8),i=n(1),r=n(2),o=n(4),u=n(3),c=n(5),s=n(0),l=n.n(s),h=(n(52),l.a.forwardRef((function(e,t){return null})),function(e){function t(){var e,n;Object(i.a)(this,t);for(var a=arguments.length,r=new Array(a),c=0;c<a;c++)r[c]=arguments[c];return(n=Object(o.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).state={styles:{},value:""},n}return Object(c.a)(t,e),Object(r.a)(t,[{key:"handleChage",value:function(e){this.props.onInputChange(e.target.value)}},{key:"shouldComponentUpdate",value:function(){return!0}},{key:"componentDidUpdate",value:function(){}},{key:"componentDidMount",value:function(){var e=this.state.styles;if(this.props.width){e=Object(a.a)({},e,{},{width:this.props.width});var t=Object(a.a)({},this.state,{},{styles:e});this.setState(t)}if(this.props.height){e=Object(a.a)({},e,{},{height:this.props.height});var n=Object(a.a)({},this.state,{},{styles:e});this.setState(n)}}},{key:"render",value:function(){return l.a.createElement("div",{className:"FtInput"},l.a.createElement("input",{type:"text",onChange:this.handleChage.bind(this),value:this.props.value,style:this.state.styles,ref:this.props.inputRef}))}}]),t}(s.Component));t.a=h},45:function(e,t,n){e.exports=n(92)},50:function(e,t,n){},52:function(e,t,n){var a=n(53);"string"===typeof a&&(a=[[e.i,a,""]]);var i={insert:"head",singleton:!1};n(17)(a,i);a.locals&&(e.exports=a.locals)},53:function(e,t,n){(e.exports=n(16)(!1)).push([e.i,".FtInput input {\n  color: #515a6e;\n  border: 1px solid #dcdee2;\n}\n",""])},54:function(e,t,n){var a=n(55);"string"===typeof a&&(a=[[e.i,a,""]]);var i={insert:"head",singleton:!1};n(17)(a,i);a.locals&&(e.exports=a.locals)},55:function(e,t,n){(e.exports=n(16)(!1)).push([e.i,".flexCenter {\n  display: flex;\n  align-items: center;\n  justify-content: center;\n}\n.flexColumnCenter {\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  flex-direction: column;\n}\n.flexColumnStart {\n  display: flex;\n  align-items: flex-start;\n  flex-direction: column;\n}\n.ft-login-form {\n  padding: 20px 20px 20px 20px;\n  max-width: 280px;\n  max-height: 200px;\n  border: 1px solid #dcdee2;\n  display: flex;\n  align-items: flex-start;\n  flex-direction: column;\n}\n.ft-login-form .ft-input {\n  color: #515a6e;\n  border: 1px solid #dcdee2;\n  margin-bottom: 20px;\n}\n",""])},56:function(e,t,n){var a=n(57);"string"===typeof a&&(a=[[e.i,a,""]]);var i={insert:"head",singleton:!1};n(17)(a,i);a.locals&&(e.exports=a.locals)},57:function(e,t,n){(e.exports=n(16)(!1)).push([e.i,"",""])},87:function(e,t,n){var a=n(88);"string"===typeof a&&(a=[[e.i,a,""]]);var i={insert:"head",singleton:!1};n(17)(a,i);a.locals&&(e.exports=a.locals)},88:function(e,t,n){(e.exports=n(16)(!1)).push([e.i,".home {\n  background-color: #e8e8e8;\n  min-height: 100vh;\n}\n.home-canteen-card {\n  min-height: 200px;\n}\n",""])},92:function(e,t,n){"use strict";n.r(t);var a=n(0),i=n.n(a),r=n(10),o=n.n(r);n(50),Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));n(51);var u=n(1),c=n(2),s=n(4),l=n(3),h=n(5),f=n(97),p=n(18),d=n.n(p),v=new function e(){Object(u.a)(this,e),this.dev="http://39.105.190.207:8181/api/",this.pro="http://39.105.190.207:7775/api/",this.cookieExpires=1/6,this.successCode=200,this.failCode=400,this.errMsg="\u670d\u52a1\u5668\u5185\u90e8\u51fa\u9519"},m=n(14),b=function(e){e&&(e=m.stringUtil.randomMd(e)),d.a.set("userToken",e,{expires:v.cookieExpires})},y=function(){var e=d.a.get("userToken");return e?m.stringUtil.randomMdDe(e):null},g=function(){function e(){Object(u.a)(this,e),this.isAuthenticated=!1,null!=y()&&(this.isAuthenticated=!0)}return Object(c.a)(e,[{key:"authenticate",value:function(e){this.isAuthenticated=!0,setTimeout(e,100)}},{key:"signout",value:function(e){this.isAuthenticated=!1,localStorage.clear(),b(""),setTimeout(e,100)}}]),e}(),j=n(8),O=n(39),k=n.n(O),x=n(19),w=n.n(x),C=(new m.ObjUtil,new(function(){function e(t){Object(u.a)(this,e),this.baseUrl="",this.baseUrl=t}return Object(c.a)(e,[{key:"getInsideConfig",value:function(){return{withCredentials:!0,baseURL:this.baseUrl,paramsSerializer:function(e){if(e.levelToken)delete e.levelToken;else{var t={token:y()};e=Object(j.a)({},e,{},t)}return w.a.stringify(e)},headers:{"Content-Type":"application/x-www-form-urlencoded"}}}},{key:"interceptor",value:function(e){e.interceptors.request.use((function(e){return e.data=w.a.stringify(e.data),e}),(function(e){return Promise.reject(e)})),e.interceptors.response.use((function(e){var t=e.data;return 200!==e.status?(alert("\u670d\u52a1\u5668\u5185\u90e8\u51fa\u9519"),"\u670d\u52a1\u5668\u5185\u90e8\u51fa\u9519"):t}),(function(e){return Promise.reject("\u670d\u52a1\u5668\u5185\u90e8\u51fa\u9519")}))}},{key:"request",value:function(e){var t=k.a.create(),n=Object.assign(this.getInsideConfig(),e);return this.interceptor(t),t(n)}},{key:"filterConfig",value:function(e){var t=e.data;return t.levelCredentials&&(e.withCredentials=!1,delete t.levelCredentials),t.responseType&&(e.responseType=t.responseType,delete t.responseType),e.data=t,e}}]),e}())(v.pro)),E=new function e(){Object(u.a)(this,e),this.getLoginMessage=function(e){return C.request({url:"/adminServiceZuul/User/login",method:"post",data:e})}},U=new(function(){function e(){Object(u.a)(this,e)}return Object(c.a)(e,[{key:"setUser",value:function(e){localStorage.setItem("user",JSON.stringify(e))}},{key:"getUser",value:function(){var e=localStorage.getItem("user");return e=e,JSON.parse(e)}}]),e}()),S=new(function(){function e(){Object(u.a)(this,e)}return Object(c.a)(e,[{key:"login",value:function(e){return new Promise((function(t,n){E.getLoginMessage(e).then((function(e){var n=e;if(200==n.status){var a=n.data;b(a.token),U.setUser(a.user),t(n.msg)}}),(function(e){return n("fail")}))}))}}]),e}()),M=n(96),D=n(12),F=Object(D.a)({}),P=function(e){function t(){var e;return Object(u.a)(this,t),(e=Object(s.a)(this,Object(l.a)(t).call(this,{}))).state={hasError:!1},e}return Object(h.a)(t,e),Object(c.a)(t,[{key:"componentDidCatch",value:function(e,t){this.setState({hasError:!0})}},{key:"render",value:function(){return this.state.hasError?i.a.createElement("h1",null,"Something went wrong."):this.props.children}}]),t}(a.Component),R=new g,T=function(e){function t(){return Object(u.a)(this,t),Object(s.a)(this,Object(l.a)(t).call(this,{}))}return Object(h.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){}},{key:"submit",value:function(e){var t=this;Promise.resolve().then(n.bind(null,14)).then((function(n){n.stringUtil.removeSpace(e.pwd)?t.sendData(e):M.a.warn("\u4e0d\u53ef\u4e3a\u7a7a\u503c")}))}},{key:"sendData",value:function(e){var t={userPwd:e.pwd,userEmail:e.email};S.login(t).then((function(e){var t=e;M.a.success(t),R.authenticate(F.push("/"))}),(function(e){M.a.error(e)}))}},{key:"componentWillMount",value:function(){}},{key:"render",value:function(){return i.a.createElement(a.Fragment,null,i.a.createElement(P,null,i.a.createElement(m.FtLoginForm,{submit:this.submit.bind(this),width:"200px"})))}}]),t}(a.Component);T.displayName=void 0;var I,N=T,W=(n(87),function(e){function t(){return Object(u.a)(this,t),Object(s.a)(this,Object(l.a)(t).call(this,{}))}return Object(h.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){}},{key:"componentWillUnmount",value:function(){}}]),Object(c.a)(t,[{key:"test",value:function(){}},{key:"render",value:function(){return i.a.createElement("div",{className:"home"},"home")}}]),t}(a.Component)),A=n(15),L=function(e){function t(){var e,n;Object(u.a)(this,t);for(var a=arguments.length,i=new Array(a),r=0;r<a;r++)i[r]=arguments[r];return(n=Object(s.a)(this,(e=Object(l.a)(t)).call.apply(e,[this].concat(i)))).state={width:"200px",height:"100px"},n}return Object(h.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){return i.a.createElement("div",null,"\u5c3e\u90e8",i.a.createElement(A.a,this.state))}}]),t}(a.Component),B=function(e){function t(){return Object(u.a)(this,t),Object(s.a)(this,Object(l.a)(t).apply(this,arguments))}return Object(h.a)(t,e),Object(c.a)(t,[{key:"componentDidUpdate",value:function(){}},{key:"componentWillReceiveProps",value:function(){}},{key:"componentDidCatch",value:function(){}},{key:"render",value:function(){return i.a.createElement("div",null,i.a.createElement(f.b,{history:F},i.a.createElement(f.c,null,i.a.createElement(f.a,{component:N,exact:!0,path:"/login"}),i.a.createElement(f.a,{component:W,exact:!0,path:"/"})),i.a.createElement(L,null)))}}]),t}(a.Component);I=B,o.a.render(i.a.createElement(I,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[45,1,2]]]);
//# sourceMappingURL=main.40282b44.chunk.js.map